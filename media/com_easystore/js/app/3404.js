"use strict";(self.webpackChunkreact_typescript_webpack=self.webpackChunkreact_typescript_webpack||[]).push([[3404],{93404:(n,t,e)=>{e.r(t),e.d(t,{default:()=>Pt});var c=e(72135),g=e(50394),O=e(19513),k=e(21349),H=e(75096),s=e(39248),p=e(49587),f=e(17437),A=e(96756),S=e(88294),E=e(73491),Y=e(49258),P=e(84026),w=e(96540),T=e(49785),C=e(5714),x=e(92921),R=e(90578),y=e(72263),b=e(59217),W=e(30105),L=e(33666),D=e(45584),G=e(22654),K=e(7350),U=e(7181),V=e(11135),I=e(2445);function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach(function(t){z(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function z(t,e,n){return(e=function(t){var e=function(t){if("object"!=r(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==r(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const X=function(t){var e,n,r=t.isGuest,i=t.user,o=t.onCustomerChange,a=(0,S.B)(),c=(0,T.xW)(),l=(0,b.dz)(),u=(0,A.p)({defaultValues:{search:""}}),d=(0,G.d)(u.watch("search")),s=(0,y.UJ)({search:d}),p=(0,D.h)().showModal,f=(0,K.t)({isOpen:!!d,isDropdown:!0}),_=f.triggerRef,m=f.triggerWidth,h=f.position,v=f.popoverRef;return(0,I.FD)(E.A,{children:[(0,I.Y)(E.a,{title:a("COM_EASYSTORE_APP_ORDER_ASSIGN_CUSTOMER")}),(0,I.Y)(C.A,{when:!(r&&null!=i&&i.email),fallback:(0,I.FD)("div",{css:j.guestCustomerWrapper,children:[(0,I.Y)("h4",{children:null!==(e=null==i?void 0:i.name)&&void 0!==e?e:a("COM_EASYSTORE_APP_GUEST_CUSTOMER_LABEL")}),(0,I.Y)("p",{children:null!==(n=null==i?void 0:i.email)&&void 0!==n?n:""})]}),children:function(){var t,e;return(0,I.Y)("div",{css:R.xB.cardInnerSection,children:(0,I.FD)("div",{children:[(0,I.FD)("div",{css:j.searchLabel,children:[(0,I.Y)("p",{children:a("COM_EASYSTORE_APP_ORDER_ASSIGN_CUSTOMER_SEARCH_LABEL")}),(0,I.Y)(g.Ay,{variant:g.Ak.plain,onClick:function(){p({component:L.A,props:{title:a("COM_EASYSTORE_APP_CREATE_A_NEW_CUSTOMER"),onCreateUser:function(t){c.setValue("customer_id",t)},user:null}})},children:a("COM_EASYSTORE_APP_ORDER_ASSIGN_CUSTOMER_ADD_NEW_BUTTON_TEXT")})]}),(0,I.Y)("div",{css:j.triggerRefStyles,ref:_,children:(0,I.Y)(T.xI,{control:u.control,name:"search",render:function(t){return(0,I.Y)(W.A,q(q({},t),{},{content:(0,I.Y)(x.A,{name:"search"}),placeholder:a("COM_EASYSTORE_APP_ORDER_ASSIGN_CUSTOMER_SEARCH_PLACEHOLDER"),showVerticalBar:!1,loading:s.isLoading}))}})}),(0,I.Y)(K.Z,{isOpen:!!d,onClickOutside:function(){return u.setValue("search","")},children:(0,I.FD)("div",{css:[j.dropdownWrapper,{left:h.left,top:h.top,maxWidth:m},";label:AssignCustomerLayout;"],ref:v,children:[!s.isLoading&&!s.data&&(0,I.Y)("div",{css:j.centerItems,children:a("COM_EASYSTORE_APP_GLOBAL_SOMETHING_WENT_WRONG")}),!s.isLoading&&!(null!==(t=s.data)&&void 0!==t&&t.length)&&(0,I.Y)("div",{css:j.noCustomer,children:a("COM_EASYSTORE_APP_NO_USER_FOUND")}),!s.isLoading&&(null===(e=s.data)||void 0===e?void 0:e.map(function(t){var e;return(0,I.Y)(U.O,{icon:(0,I.Y)("div",{css:j.avatarWrapper,children:(0,I.Y)("img",{src:t.image?"".concat(null===(e=l.data)||void 0===e?void 0:e.baseUrl).concat(t.image):V,alt:t.name})}),text:(0,I.FD)("div",{css:j.dropdownInfo,children:[(0,I.Y)("p",{css:j.marginBottomZero,children:t.name}),(0,I.Y)("p",{children:t.email})]}),onClick:function(){u.setValue("search",""),c.setValue("customer_id",t.id),o(t.id),c.setValue("shipping",{uuid:"",name:"",rate:0,estimate:""})}},t.id)}))]})})]})})}})]})};var j={guestCustomerWrapper:(0,f.AH)("padding:",s.YK[24],";display:flex;flex-direction:column;gap:",s.YK[4],";h4{",p.I.heading6("medium"),";margin:0;}p{",p.I.body("medium"),";color:",s.nm.text.neutral,";};label:guestCustomerWrapper;"),searchLabel:(0,f.AH)("display:flex;justify-content:space-between;margin-bottom:",s.YK[4],";p{font-size:",s.J[14],";};label:searchLabel;"),triggerRefStyles:{name:"15x9emy-triggerRefStyles",styles:"position:relative;label:triggerRefStyles;"},dropdownWrapper:(0,f.AH)("position:absolute;background-color:",s.nm.basic.white,";box-shadow:",s.r7.popover,";border-radius:",s.Vq[6],";padding:",s.YK[8]," 0;width:100%;max-height:250px;",R.xB.overflowYAuto,";;label:dropdownWrapper;"),centerItems:(0,f.AH)(R.xB.flexCenter(),";;label:centerItems;"),noCustomer:(0,f.AH)("min-height:40px;",R.xB.flexCenter(),";color:",s.nm.text.neutral,";;label:noCustomer;"),avatarWrapper:(0,f.AH)("height:32px;width:32px;border-radius:",s.Vq.circle,";overflow:hidden;img{height:100%;width:100%;object-fit:cover;};label:avatarWrapper;"),dropdownInfo:(0,f.AH)("display:flex;flex-direction:column;p{font-size:",s.J[14],";}p:last-of-type{color:",s.nm.text.neutral,";};label:dropdownInfo;"),marginBottomZero:{name:"zs566b-marginBottomZero",styles:"margin-bottom:0;label:marginBottomZero;"}},Z=e(55267);const J=function(t){var e,n,r,i=t.isGuest,o=t.user,a=t.order,c=t.onCustomerChange,l=t.loading,u=(0,T.xW)().watch("customer_id",null),d=(0,y.fx)({id:u}),s=(0,b.dz)();if(s.isLoading)return(0,I.Y)(O.Ay,{});var p=null!==(e=null==s||null===(n=s.data)||void 0===n||null===(n=n.payment_methods.find(function(t){return t.name===(null==a?void 0:a.payment_method)}))||void 0===n?void 0:n.title)&&void 0!==e?e:"";return d.data?(0,I.Y)(Z.A,{user:d.data,isEditable:!l,paymentMethod:p,deliveryMethod:null==a||null===(r=a.shipping)||void 0===r?void 0:r.name}):(0,I.Y)(X,{isGuest:i,user:o,onCustomerChange:c})};var Q=e(3668),$=e(79819),tt=e(31839);const et=function(t){var e,n,r,i,o,a,c=t.order,l=(0,S.B)(),u=(0,D.h)().showModal;if((0,b.dz)().isLoading)return(0,I.Y)(O.Ay,{});var d=null!==(e=null==c?void 0:c.coupon_code)&&void 0!==e?e:"";return(0,I.Y)("div",{css:R.xB.cardInnerSection,children:(0,I.FD)("div",{css:_.paymentItems,children:[(0,I.FD)("div",{css:_.paymentItem,children:[(0,I.Y)("div",{children:l("COM_EASYSTORE_APP_ORDER_DETAILS_PAGE_SUBTOTAL")}),(0,I.Y)("div",{}),(0,I.FD)("div",{css:R.xB.priceIncludingTax,children:[(0,I.Y)(C.A,{when:(null!==(n=null==c?void 0:c.discounted_sub_total)&&void 0!==n?n:0)>0,fallback:(0,I.Y)("div",{children:null!==(r=null==c?void 0:c.sub_total_with_currency)&&void 0!==r?r:0}),children:function(){var t;return(0,I.Y)("div",{children:null!==(t=null==c?void 0:c.discounted_sub_total_with_currency)&&void 0!==t?t:0})}}),(0,I.Y)(C.A,{when:(null==c?void 0:c.is_tax_included_in_price)&&!(null==c||!c.taxable_amount),children:function(){var t;return(0,I.Y)("small",{children:l("COM_EASYSTORE_APP_INCLUDING_TAX_MSG",{amount:null!==(t=null==c?void 0:c.taxable_amount_with_currency)&&void 0!==t?t:""})})}})]})]}),(0,I.FD)("div",{css:_.paymentItem,children:[(0,I.Y)("div",{children:l("COM_EASYSTORE_APP_ORDER_DETAILS_PAGE_COUPON")}),(0,I.Y)(C.A,{when:d,fallback:(0,I.Y)($.A,{comment:""}),children:function(t){return(0,I.FD)("div",{css:_.orderCoupon,children:[(0,I.Y)(x.A,{name:"coupon",width:12,height:12}),t,"free_shipping"!==(null==c?void 0:c.coupon_category)&&"(−".concat(null==c?void 0:c.coupon_discount_with_currency,")")]})}}),(0,I.Y)("div",{})]}),(0,I.FD)("div",{css:_.paymentItem,children:[(0,I.Y)("div",{children:l("COM_EASYSTORE_APP_ORDER_DETAILS_PAGE_SHIPPING")}),null!=c&&null!==(i=c.shipping)&&void 0!==i&&i.name?(0,I.FD)("div",{children:[c.shipping.name," ",(0,P.O9)(null==c?void 0:c.total_weight_with_unit)&&"(".concat(c.total_weight_with_unit,")")]}):(0,I.Y)($.A,{comment:l("COM_EASYSTORE_APP_ORDER_DETAILS_NO_SHIPPING")}),(0,I.FD)("div",{css:R.xB.priceIncludingTax,children:[(0,I.Y)("div",{children:null==c||null===(o=c.shipping)||void 0===o?void 0:o.rate_with_currency}),(0,I.Y)(C.A,{when:(null==c?void 0:c.is_tax_included_in_price)&&!(null==c||!c.shipping_tax),children:function(){var t;return(0,I.Y)("small",{children:l("COM_EASYSTORE_APP_INCLUDING_TAX_MSG",{amount:null!==(t=null==c?void 0:c.shipping_tax_with_currency)&&void 0!==t?t:""})})}})]})]}),(0,I.Y)(C.A,{when:!(null!=c&&c.is_tax_included_in_price)&&(null!==(a=null==c?void 0:c.taxable_amount)&&void 0!==a?a:0)>0,children:function(){return(0,I.FD)("div",{css:_.paymentItem,children:[(0,I.Y)("div",{children:l("COM_EASYSTORE_APP_ORDER_DETAILS_PAGE_ESTIMATED_TAXES")}),(0,I.Y)("div",{children:(0,I.Y)(g.Ay,{variant:g.Ak.plain,buttonCss:(0,f.AH)("margin-left:-",s.YK[4],";;label:ManageOrderInfo;"),onClick:function(){c&&u({component:tt.S,props:{title:l("COM_EASYSTORE_APP_SHOW_TAX_RATE_HEADER"),order:c}})},children:l("COM_EASYSTORE_APP_SHOW_TAX_RATE_BUTTON")})}),(0,I.Y)("div",{children:null==c?void 0:c.taxable_amount_with_currency})]})}}),(0,I.FD)("div",{css:_.paymentItem,children:[(0,I.Y)("div",{children:l("COM_EASYSTORE_APP_ORDER_DETAILS_PAGE_TOTAL")}),(0,I.Y)("div",{}),(0,I.Y)("div",{children:null==c?void 0:c.total_with_currency})]})]})})};var nt={name:"1lnm3sp-taxBreakdownWrapper",styles:"height:0;opacity:0;label:taxBreakdownWrapper;"},_={taxBreakdownButton:(0,f.AH)(R.xB.resetButton,";display:flex;align-items:center;gap:",s.YK[4],";;label:taxBreakdownButton;"),taxBreakdownWrapper:function(t){return(0,f.AH)("display:flex;flex-direction:column;gap:",s.YK[8],";height:50px;opacity:1;transition:height 0.3s ease-in-out,opacity 0.3s ease-in-out;margin-top:-",s.YK[8],";",!t&&nt,";;label:taxBreakdownWrapper;")},paymentItems:(0,f.AH)("display:grid;gap:",s.YK[16],";>div:first-of-type>div:last-of-type{font-weight:",s.Wy.medium,";color:",s.nm.text.default,";}>div:last-of-type{font-weight:",s.Wy.medium,";color:",s.nm.text.default,";};label:paymentItems;"),paymentItem:(0,f.AH)("display:grid;grid-template-columns:repeat(3, 1fr);",p.I.body()," color:",s.nm.text.neutral,";>div:last-of-type{text-align:right;color:",s.nm.text.default,";}button{padding-left:0;};label:paymentItem;"),orderCoupon:(0,f.AH)("display:flex;align-items:center;gap:",s.YK[4],";padding:",s.YK[4]," ",s.YK[8],";background-color:",s.nm.basic.surface,";border-radius:",s.Vq[6],";width:max-content;;label:orderCoupon;")},rt=e(44944),it=e(56051);const ot=function(t){var e=t.closeModal,n=t.title,r=t.description,i=t.confirmButtonText,o=t.cancelButtonText,a=t.confirmButtonVariant,c=(0,S.B)();return(0,I.Y)(it.A,{onClose:function(){return e({action:"CLOSE"})},title:n,children:(0,I.FD)("div",{css:l.contentWrapper,children:[(0,I.Y)("p",{css:l.content,children:null!=r?r:c("COM_EASYSTORE_APP_DELETE_WARNING")}),(0,I.FD)("div",{css:l.footerWrapper,children:[(0,I.Y)(g.Ay,{variant:g.Ak.secondary,onClick:function(){return e({action:"CLOSE"})},size:g.Mp.slim,children:null!=o?o:c("COM_EASYSTORE_APP_CANCEL")}),(0,I.Y)(g.Ay,{variant:null!=a?a:g.Ak.critical,size:g.Mp.slim,onClick:function(){e({action:"CONFIRM"})},children:null!=i?i:c("COM_EASYSTORE_APP_DELETE")})]})]})})};var l={contentWrapper:{name:"1l09fit-contentWrapper",styles:"width:620px;label:contentWrapper;"},content:(0,f.AH)("padding:",s.YK[20],";;label:content;"),footerWrapper:(0,f.AH)("display:flex;justify-content:end;gap:",s.YK[8],";padding:",s.YK[16],";box-shadow:",s.r7.dividerTop,";;label:footerWrapper;")},at={},ct=e(12752),lt=e(72517),ut=e(51352);function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function h(){var f,_,t="function"==typeof Symbol?Symbol:{},e=t.iterator||"@@iterator",n=t.toStringTag||"@@toStringTag";function r(t,e,n,r){var i=e&&e.prototype instanceof a?e:a,o=Object.create(i.prototype);return d(o,"_invoke",function(r,i,t){var o,a,c,l=0,u=t||[],d=!1,s={p:0,n:0,v:f,a:p,f:p.bind(f,4),d:function(t,e){return o=t,a=0,c=f,s.n=e,m}};function p(t,e){for(a=t,c=e,_=0;!d&&l&&!n&&_<u.length;_++){var n,r=u[_],i=s.p,o=r[2];t>3?(n=o===e)&&(c=r[(a=r[4])?5:(a=3,3)],r[4]=r[5]=f):r[0]<=i&&((n=t<2&&i<r[1])?(a=0,s.v=e,s.n=r[1]):i<o&&(n=t<3||r[0]>e||e>o)&&(r[4]=t,r[5]=e,s.n=o,a=0))}if(n||t>1)return m;throw d=!0,e}return function(t,e,n){if(l>1)throw TypeError("Generator is already running");for(d&&1===e&&p(e,n),a=e,c=n;(_=a<2?f:c)||!d;){o||(a?a<3?(a>1&&(s.n=-1),p(a,c)):s.n=c:s.v=c);try{if(l=2,o){if(a||(t="next"),_=o[t]){if(!(_=_.call(o,c)))throw TypeError("iterator result is not an object");if(!_.done)return _;c=_.value,a<2&&(a=0)}else 1===a&&(_=o.return)&&_.call(o),a<2&&(c=TypeError("The iterator does not provide a '"+t+"' method"),a=1);o=f}else if((_=(d=s.n<0)?c:r.call(i,s))!==m)break}catch(t){o=f,a=1,c=t}finally{l=1}}return{value:_,done:d}}}(t,n,r),!0),o}var m={};function a(){}function i(){}function o(){}_=Object.getPrototypeOf;var c=[][e]?_(_([][e]())):(d(_={},e,function(){return this}),_),l=o.prototype=a.prototype=Object.create(c);function u(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,o):(t.__proto__=o,d(t,n,"GeneratorFunction")),t.prototype=Object.create(l),t}return i.prototype=o,d(l,"constructor",o),d(o,"constructor",i),i.displayName="GeneratorFunction",d(o,n,"GeneratorFunction"),d(l),d(l,n,"Generator"),d(l,e,function(){return this}),d(l,"toString",function(){return"[object Generator]"}),(h=function(){return{w:r,m:u}})()}function d(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}d=function(t,e,n,r){function i(e,n){d(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(i("next",0),i("throw",1),i("return",2))},d(t,e,n,r)}function dt(t,e,n,r,i,o,a){try{var c=t[o](a),l=c.value}catch(t){return void n(t)}c.done?e(l):Promise.resolve(l).then(r,i)}function st(c){return function(){var t=this,a=arguments;return new Promise(function(e,n){var r=c.apply(t,a);function i(t){dt(r,e,n,i,o,"next",t)}function o(t){dt(r,e,n,i,o,"throw",t)}i(void 0)})}}function pt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ft(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pt(Object(n),!0).forEach(function(t){_t(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pt(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function _t(t,e,n){return(e=function(t){var e=function(t){if("object"!=i(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==i(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var mt={name:"1wum7yw-Header",styles:"text-align:right;label:Header;"};const ht=function(t){var e,n=t.products,r=t.loading,i=t.onRemoveProduct,o=t.onChangeQuantity,a=t.order,c=(0,S.B)(),l=(0,T.xW)(),u=(0,D.h)().showModal,d=(e=(0,b.dz)(),(0,w.useMemo)(function(){return e.isLoading||!e.data?at:e.data},[e]),[{Header:c("COM_EASYSTORE_APP_PRODUCT_NAME"),Cell:function(t,e){var n;return(0,I.FD)("div",{css:m.productInfo,children:[(0,I.Y)(ct.A,{name:t.title,path:t.image}),(0,I.FD)("div",{css:m.productContent,children:[(0,I.Y)("h6",{css:m.productName,children:t.title}),(0,I.Y)(C.A,{when:t.cart_item.is_coupon_applicable,children:function(){return(0,I.FD)("div",{css:m.productCoupon,children:[(0,I.Y)(x.A,{name:"coupon",width:12,height:12}),(0,I.Y)("span",{children:t.cart_item.applied_coupon.code}),(0,I.FD)("span",{children:["(− ",t.cart_item.final_price.unit_discount_value_with_currency,")"]})]})}}),(0,I.Y)(C.A,{when:t.cart_item.is_coupon_applicable,fallback:(0,I.Y)("div",{css:m.productPrice,children:(0,I.Y)("span",{children:t.cart_item.final_price.unit_product_price_with_currency})}),children:function(){return(0,I.FD)("div",{css:m.productPrice,children:[(0,I.Y)("span",{children:t.cart_item.final_price.unit_discounted_price_with_currency}),(0,I.Y)("del",{children:t.cart_item.final_price.unit_product_price_with_currency})]})}}),!!t.options.length&&(0,I.Y)("div",{css:m.variant,children:(0,I.Y)("span",{children:null===(n=t.options)||void 0===n?void 0:n.map(function(t,e){return(0,I.FD)("span",{css:m.totalspan,children:[(0,I.FD)("span",{css:m.optionKey,children:[t.key,": "]}),(0,I.Y)("span",{children:t.name})]},e)})})}),(0,I.Y)("div",{css:m.productPriceInfo})]})]})},width:580},{Header:c("COM_EASYSTORE_APP_QUANTITY"),Cell:function(t,e){return(0,I.Y)("div",{css:m.quantity,children:(0,I.Y)(T.xI,{control:l.control,name:"products.".concat(e,".quantity"),rules:(0,ut.WN)(),render:function(t){return(0,I.Y)(rt.A,ft(ft({},t),{},{disabled:r,placeholder:"5",type:"number",onChange:function(){return o()}}))}},"products.".concat(e,".quantity"))})},width:220},{Header:(0,I.Y)("div",{css:mt,children:c("COM_EASYSTORE_APP_TOTAL")}),Cell:function(t){return(0,I.FD)("div",{css:R.xB.priceIncludingTax,children:[(0,I.Y)("span",{css:p.I.body(),children:t.cart_item.is_coupon_applicable?t.cart_item.final_price.total_discounted_price_with_currency:t.cart_item.final_price.total_product_price_with_currency}),(0,I.Y)(C.A,{when:(null==a?void 0:a.is_tax_included_in_price)&&t.cart_item.taxable_amount>0,children:function(){return(0,I.Y)("small",{children:c("COM_EASYSTORE_APP_INCLUDING_TAX_MSG",{amount:t.cart_item.taxable_amount_with_currency})})}})]})},width:250},{Cell:function(t,e){return(0,I.Y)("div",{css:m.deleteButtonWrapper,children:(0,I.Y)(g.Ay,{variant:g.Ak.plain,buttonCss:m.deleteButton,disabled:r,onClick:st(h().m(function t(){return h().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,u({component:ot,props:{title:c("COM_EASYSTORE_ORDER_DELETE_PRODUCT")}});case 1:"CONFIRM"===t.v.action&&i(e);case 2:return t.a(2)}},t)})),children:(0,I.Y)(x.A,{name:"delete"})})})}}]);return(0,I.Y)(lt.A,{columns:d,data:n})};var vt={name:"ms33s7-discountedPrice",styles:"text-decoration-line:line-through;label:discountedPrice;"},m={productInfo:(0,f.AH)("display:flex;align-items:start;gap:",s.YK[20],";>div:first-of-type{width:56px;height:56px;};label:productInfo;"),productContent:(0,f.AH)("display:flex;flex-direction:column;gap:",s.YK[4],";;label:productContent;"),productName:(0,f.AH)(p.I.heading6("medium"),";line-height:",s.K_[20],";;label:productName;"),variant:(0,f.AH)(p.I.body()," color:",s.nm.text.neutral,";;label:variant;"),salePrice:(0,f.AH)(p.I.body()," color:",s.nm.text.neutral,";;label:salePrice;"),productPriceInfo:{name:"1asl2pd-productPriceInfo",styles:"display:flex;flex-direction:column;label:productPriceInfo;"},discountedPrice:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(0,f.AH)("display:grid;place-items:center;color:",s.nm.text.neutral,";",t&&vt,";;label:discountedPrice;")},quantity:{name:"1om5clv-quantity",styles:"max-width:88px;label:quantity;"},deleteButtonWrapper:(0,f.AH)(R.xB.flexCenter(),";width:100%;padding-right:",s.YK[24],";;label:deleteButtonWrapper;"),deleteButton:(0,f.AH)("width:32px;height:32px;color:",s.nm.icon.default,";;label:deleteButton;"),optionKey:{name:"16thez1-optionKey",styles:"font-weight:bold;label:optionKey;"},totalspan:(0,f.AH)("margin-right:",s.YK[6],";;label:totalspan;"),productCoupon:(0,f.AH)("display:flex;align-items:center;gap:",s.YK[4],";;label:productCoupon;"),productPrice:(0,f.AH)("display:flex;align-items:center;gap:",s.YK[8],";;label:productPrice;")};function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}var yt=["shipping"];function bt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bt(Object(n),!0).forEach(function(t){gt(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bt(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function gt(t,e,n){return(e=function(t){var e=function(t){if("object"!=o(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==o(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function B(t){return function(t){if(Array.isArray(t))return a(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Et(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(){var f,_,t="function"==typeof Symbol?Symbol:{},e=t.iterator||"@@iterator",n=t.toStringTag||"@@toStringTag";function r(t,e,n,r){var i=e&&e.prototype instanceof a?e:a,o=Object.create(i.prototype);return v(o,"_invoke",function(r,i,t){var o,a,c,l=0,u=t||[],d=!1,s={p:0,n:0,v:f,a:p,f:p.bind(f,4),d:function(t,e){return o=t,a=0,c=f,s.n=e,m}};function p(t,e){for(a=t,c=e,_=0;!d&&l&&!n&&_<u.length;_++){var n,r=u[_],i=s.p,o=r[2];t>3?(n=o===e)&&(c=r[(a=r[4])?5:(a=3,3)],r[4]=r[5]=f):r[0]<=i&&((n=t<2&&i<r[1])?(a=0,s.v=e,s.n=r[1]):i<o&&(n=t<3||r[0]>e||e>o)&&(r[4]=t,r[5]=e,s.n=o,a=0))}if(n||t>1)return m;throw d=!0,e}return function(t,e,n){if(l>1)throw TypeError("Generator is already running");for(d&&1===e&&p(e,n),a=e,c=n;(_=a<2?f:c)||!d;){o||(a?a<3?(a>1&&(s.n=-1),p(a,c)):s.n=c:s.v=c);try{if(l=2,o){if(a||(t="next"),_=o[t]){if(!(_=_.call(o,c)))throw TypeError("iterator result is not an object");if(!_.done)return _;c=_.value,a<2&&(a=0)}else 1===a&&(_=o.return)&&_.call(o),a<2&&(c=TypeError("The iterator does not provide a '"+t+"' method"),a=1);o=f}else if((_=(d=s.n<0)?c:r.call(i,s))!==m)break}catch(t){o=f,a=1,c=t}finally{l=1}}return{value:_,done:d}}}(t,n,r),!0),o}var m={};function a(){}function i(){}function o(){}_=Object.getPrototypeOf;var c=[][e]?_(_([][e]())):(v(_={},e,function(){return this}),_),l=o.prototype=a.prototype=Object.create(c);function u(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,o):(t.__proto__=o,v(t,n,"GeneratorFunction")),t.prototype=Object.create(l),t}return i.prototype=o,v(l,"constructor",o),v(o,"constructor",i),i.displayName="GeneratorFunction",v(o,n,"GeneratorFunction"),v(l),v(l,n,"Generator"),v(l,e,function(){return this}),v(l,"toString",function(){return"[object Generator]"}),(F=function(){return{w:r,m:u}})()}function v(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}v=function(t,e,n,r){function i(e,n){v(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(i("next",0),i("throw",1),i("return",2))},v(t,e,n,r)}function Ot(t,e,n,r,i,o,a){try{var c=t[o](a),l=c.value}catch(t){return void n(t)}c.done?e(l):Promise.resolve(l).then(r,i)}function At(c){return function(){var t=this,a=arguments;return new Promise(function(e,n){var r=c.apply(t,a);function i(t){Ot(r,e,n,i,o,"next",t)}function o(t){Ot(r,e,n,i,o,"throw",t)}i(void 0)})}}function St(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,c=[],l=!0,u=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(c.push(r.value),c.length!==e);l=!0);}catch(t){u=!0,i=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return c}}(t,e)||Et(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Et(t,e){if(t){if("string"==typeof t)return a(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(t,e):void 0}}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}const Yt=function(t){var e,n,r,u=t.orderId,i=St((0,w.useState)(),2),a=i[0],p=i[1],o=(0,S.B)(),c=(0,k.d)().showToast,f=(0,A.p)({defaultValues:{customer_id:null,customer_note:"",payment_status:"unpaid",fulfilment:"unfulfilled",order_status:"draft",products:[],discount_reason:"",discount_type:"percent",discount_value:0,shipping:{uuid:"",name:"",rate:void 0,estimate:""},coupon:{discount_type:"percent",discount_amount:0,calculated_amount:0,category:"discount",code:"",id:null,applies_to:"all_products",available_categories:[],available_products:[],purchase_requirements:"no_minimum",purchase_requirements_value:0,sale_value:0,selected_countries:[]}}}),l=(0,H.X)().showProductsWithVariantsModal,_=(0,Y.Ae)({id:u}),d=(0,Y.SB)(),s=(0,Y.XC)();function m(t,e){var n,r,i={customer_id:null!==(n=e.customer_id)&&void 0!==n?n:null,customer_note:e.customer_note||"",products:e.products,discount_reason:e.discount_reason||"",discount_type:e.discount_type,discount_value:null!==(r=e.discount_value)&&void 0!==r?r:0,shipping:e.shipping,payment_status:e.payment_status,fulfilment:e.fulfilment,order_status:e.order_status};t.reset.call(null,i)}if((0,w.useEffect)(function(){if(_.data){var t=_.data,e=t.products,n=t.discount_reason,r=t.discount_type,i=t.discount_value,o=t.shipping,a=t.payment_status,c=t.fulfilment,l=t.order_status,u=t.customer_id,d=t.customer_note,s=(t.coupon_code,{customer_id:null!=u?u:null,customer_note:d||"",products:e,discount_reason:n||"",discount_type:r,discount_value:null!=i?i:0,shipping:o,payment_status:a,fulfilment:c,order_status:l});f.reset.call(null,s),p(_.data)}},[_.data,f.reset]),_.isLoading)return(0,I.Y)(O.Ay,{});var h=f.getValues("order_status"),v=function(){var e=At(F().m(function t(e){var n;return F().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,s.mutateAsync(e);case 1:n=t.v,m(f,n.data),p(n.data);case 2:return t.a(2)}},t)}));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=At(F().m(function t(e){var n,r,i,m,o,a,c,l;return F().w(function(t){for(;;)switch(t.n){case 0:m=new Map(f.getValues("products").map(function(t){return["".concat(t.id).concat(t.variant_id?"+"+t.variant_id:""),t]})),o=B(e.values()).reduce(function(t,e){var n=e.id,r=e.product_id,i=e.variant_id,o=e.title,a=e.image,c=e.variant_image,l=e.variant_name,u=e.state,d=e.price,s=e.variantIds,p=e.catid,f=e.options,_="checked"===u||"indeterminate"===u;return(0,P.O9)(s)||m.has(n)||!_?t:[].concat(B(t),[{id:n,product_id:r,variant_id:null!=i?i:null,discount_type:"percent",discount_value:0,discount_reason:"",quantity:1,price:d,discounted_price:d,total:d,image:c||a,title:o,sku:"",variant_name:l,options:f,catid:p}])},[]),a=[].concat(B(m.values()),B(o)),c=a.map(function(t){var e,n={product_id:t.id,variant_id:null!==(e=t.variant_id)&&void 0!==e?e:null,quantity:t.quantity};if(t.id.toString().includes("+")){var r=St(t.id.toString().split("+").map(function(t){return Number(t)}),2),i=r[0],o=r[1];n.product_id=i,n.variant_id=o}return n}),l={order_id:u,data:c,coupon_code:null!==(n=f.getValues("coupon.code"))&&void 0!==n?n:null,customer_id:null!==(r=f.getValues("customer_id"))&&void 0!==r?r:null,shipping_id:null!==(i=f.getValues("shipping.uuid"))&&void 0!==i?i:null},v(l);case 1:return t.a(2)}},t)}));return function(t){return e.apply(this,arguments)}}(),b=function(i){return f.handleSubmit(function(t){if(0!==t.products.length){var e=t.shipping,n=function(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(-1!==e.indexOf(r))continue;n[r]=t[r]}return n}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],-1===e.indexOf(n)&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}(t,yt),r=M(M({},n),{},{shipping:e?JSON.stringify(e):"",id:u,order_status:i});d.mutate(r)}else c({type:"danger",message:o("COM_EASYSTORE_APP_NO_PRODUCT_SELECTED_ERROR_MESSAGE")})})};return(0,I.Y)(T.Op,M(M({},f),{},{children:(0,I.FD)("div",{css:N.layoutWrapper,children:[(0,I.FD)("div",{css:N.mainContent,children:[(0,I.FD)(E.A,{children:[(0,I.Y)(E.a,{title:o("COM_EASYSTORE_APP_ORDER_DETAILS_PAGE_ORDER_SUMMARY")}),(0,I.Y)(ht,{products:null!==(e=null==a?void 0:a.products)&&void 0!==e?e:[],loading:s.isLoading,order:a,onChangeQuantity:function(){var t,e,n,r;if((0,P.O9)(a)){var i={order_id:u,data:a.products.map(function(t,e){return{product_id:t.id,variant_id:t.variant_id,quantity:f.getValues("products.".concat(e,".quantity"))}}),customer_id:null!==(t=null==a?void 0:a.customer_id)&&void 0!==t?t:null,coupon_code:null!==(e=null==a?void 0:a.coupon_code)&&void 0!==e?e:null,shipping_id:null!==(n=null==a||null===(r=a.shipping)||void 0===r?void 0:r.uuid)&&void 0!==n?n:null};v(i)}},onRemoveProduct:function(n){var t,e,r;if((0,P.O9)(a)){var i=a.products.filter(function(t,e){return e!==n}).map(function(t){return{product_id:t.id,variant_id:t.variant_id,quantity:t.quantity}}),o={order_id:u,data:i,customer_id:null!==(t=a.customer_id)&&void 0!==t?t:null,coupon_code:null!==(e=f.getValues("coupon.code"))&&void 0!==e?e:null,shipping_id:null!==(r=f.getValues("shipping.uuid"))&&void 0!==r?r:null};v(o)}}}),(0,I.Y)("div",{css:N.buttonWrapper,children:(0,I.Y)(g.Ay,{onClick:function(){var t=f.getValues("products").map(function(t){var e=t.id,n=t.variant_id;return(0,P.O9)(n)?"".concat(e,"+").concat(n):e.toString()});l({selectedProductIds:t,onSelectProducts:y,disableOldSelection:!0})},icon:(0,I.Y)(x.A,{name:"plus-circle"}),children:o("COM_EASYSTORE_APP_ORDERS_ADD_PRODUCTS")})})]}),(0,I.FD)(E.A,{children:[(0,I.Y)(E.a,{title:o("COM_EASYSTORE_APP_ORDER_DETAILS_PAGE_PAYMENT_INFO")}),(0,I.Y)(et,{order:a})]})]}),(0,I.FD)("div",{css:N.actionFooter,children:[(0,I.Y)("div",{children:(0,I.Y)(C.A,{when:"draft"===h,children:function(){return(0,I.Y)("button",{type:"button",onClick:b("draft"),css:R.xB.hidden,id:"easystore-save-as-draft",children:o("COM_EASYSTORE_APP_SAVE_AS_DRAFT_BUTTON")})}})}),(0,I.Y)("div",{css:N.actionButtons,children:(0,I.Y)("button",{type:"button",onClick:function(){b("active")()},id:"easystore-save-order",css:R.xB.hidden,children:o("draft"===h?"COM_EASYSTORE_APP_CREATE_ORDER_BUTTON":"COM_EASYSTORE_APP_SAVE_ORDER_BUTTON")})})]}),(0,I.FD)("div",{css:N.rightSidebar,children:[(0,I.Y)("h6",{children:o("COM_EASYSTORE_APP_ORDER_INFO")}),(0,I.Y)(J,{order:a,isGuest:!(null==a||null===(n=a.user)||void 0===n||!n.is_guest),user:null!==(r=null==a?void 0:a.user)&&void 0!==r?r:null,loading:s.isLoading,onCustomerChange:function(t){var e,n;if(t&&a){var r={order_id:u,data:a.products.map(function(t){return{product_id:t.id,variant_id:t.variant_id,quantity:Number(t.quantity)}}),customer_id:t,coupon_code:null!==(e=f.getValues("coupon.code"))&&void 0!==e?e:null,shipping_id:null!==(n=f.getValues("shipping.uuid"))&&void 0!==n?n:null};v(r)}}}),(0,I.Y)(Q.A,{})]})]})}))};var N={layoutWrapper:(0,f.AH)("display:grid;grid-template-columns:auto 354px;grid-template-rows:auto 1fr;column-gap:",s.YK[48],";row-gap:",s.YK[24],";",s.EA.tablet,"{grid-template-columns:auto;};label:layoutWrapper;"),mainContent:(0,f.AH)("grid-row:1;display:flex;flex-direction:column;gap:",s.YK[24],";",s.EA.tablet,"{grid-row:auto;};label:mainContent;"),rightSidebar:(0,f.AH)("grid-row:1/-1;display:flex;flex-direction:column;gap:",s.YK[16],";>h6{",p.I.heading6("regular"),";}",s.EA.tablet,"{grid-row:auto;};label:rightSidebar;"),actionFooter:{name:"634wi1-actionFooter",styles:"height:fit-content;order:1;display:flex;justify-content:space-between;label:actionFooter;"},buttonWrapper:(0,f.AH)("padding:",s.YK[24]," ",s.YK[28],";;label:buttonWrapper;"),actionButtons:(0,f.AH)("display:flex;justify-content:flex-end;gap:",s.YK[16],";justify-self:flex-end;;label:actionButtons;")};const Pt=function(){(0,S.B)();var t,e=new URLSearchParams(window.location.search),n=e.has("id")&&null!==(t=e.get("id"))&&void 0!==t?t:"";return(0,I.Y)(c.A,{children:(0,I.Y)(Yt,{orderId:Number(n)})})}}}]);