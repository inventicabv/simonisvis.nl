"use strict";(self.webpackChunkreact_typescript_webpack=self.webpackChunkreact_typescript_webpack||[]).push([[5096],{75096:(r,t,e)=>{e.d(t,{X:()=>nt});var l=e(50394),u=e(66047),_=e(39248),n=e(17437),A=e(88294),C=e(96540),i=e(45584),d=e(56051),I=e(91789),w=e(19513),j=e(49587),D=e(41290),T=e(48532),Y=e(12752),k=e(25576),L=e(72517),B=(e(21349),e(4701),e(159)),V=e(15501),G=e(44831),Q=e(39176),R=e(84026),O=e(92921),S=e(30105),g=e(22654),h=e(96756),P=e(49785),H=e(2445);function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach(function(t){E(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function E(t,e,r){return(e=function(t){var e=function(t){if("object"!=o(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==o(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const q=function(t){var e=t.onFilterItems,r=(0,A.B)(),n=(0,h.p)({defaultValues:{search:""}}),i=(0,g.d)(n.watch("search"));return(0,C.useEffect)(function(){e(c({},i.length>0&&{search:i}))},[e,i]),(0,H.Y)(P.xI,{control:n.control,name:"search",render:function(t){return(0,H.Y)(S.A,c(c({},t),{},{content:(0,H.Y)(O.A,{name:"search"}),placeholder:r("COM_EASYSTORE_APP_CATEGORIES_PAGE_SEARCH_PRODUCTS_OR_SKU"),showVerticalBar:!1}))}})};function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function $(t,e,r){return(e=function(t){var e=function(t){if("object"!=s(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==s(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var K=function(t){var a=t.oldState,e=t.clickedId,r=t.currentSelectedItems,n=t.selectedItemIds,i=t.disableOldSelection,o=t.init,c=a.map(function(t){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach(function(t){$(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},t)}),l=function(e){var t;return null===(t=c.find(function(t){return t.id===e}))||void 0===t?void 0:t.state},u=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t.isOld=e,"root"!==t.id&&r.set(t.id,t)},d=function(t){t.isOld=!1,"root"!==t.id&&r.set(t.id,t)},s=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=a.find(function(t){return t.id===e});if(r){var n=a.find(function(t){return t.id===r.parentId});if(n){var i=a.filter(function(t){return t.parentId===n.id}).map(function(t){return t.id}).map(function(t){return l(t)}),o=c.find(function(t){return t.id===n.id});o&&(i.length===i.filter(function(t){return t===x.CHECKED}).length?(o.state=x.CHECKED,u(o,t)):i.length===i.filter(function(t){return t===x.UNCHECKED}).length?(o.state=x.UNCHECKED,d(o)):(o.state=x.INDETERMINATE,u(o)),s(n.id,t))}}},f=function(e){var t=c.find(function(t){return t.id===e});t&&(i&&t.isOld||(t.state=x.UNCHECKED,d(t),a.forEach(function(t){return t.parentId===e&&f(t.id)}),s(e)))},p=function(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=c.find(function(t){return t.id===e});t&&(t.isOld||(t.state=x.CHECKED,u(t,r),a.forEach(function(t){return t.parentId===e&&p(t.id,r)}),s(e,r)))};if(e){var b=l(e);if(!b)return a;b===x.CHECKED?f(e):p(e)}return o&&(n.forEach(function(t){return p(t,!0)}),r.forEach(function(t){t.state===x.UNCHECKED||(0,R.O9)(t.variantIds)||p(t.id)})),c};function X(t){return function(t){if(Array.isArray(t))return f(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||N(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(t,e){if(t){if("string"==typeof t)return f(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(t,e):void 0}}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function p(t){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p(t)}function M(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function U(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function z(t,e,r){return(e=function(t){var e=function(t){if("object"!=p(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=p(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==p(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var J={bodyRowSelectedHover:_.nm.surface.selected.neutral},x=function(t){return t.UNCHECKED="unchecked",t.CHECKED="checked",t.INDETERMINATE="indeterminate",t}({}),W={id:"root",catid:null,product_id:0,title:"Root",image:"",price:0,isTrackingInventory:!1,inventoryStatus:!1,availableQuantity:0,isOld:!1,state:x.UNCHECKED,parentId:"0",options:[]};const Z=function(t){var e,r,n,i,o,a,c=t.selectedProductIds,l=t.currentSelectedProducts,u=t.disableOldSelection,d=(0,A.B)(),s=(0,T.B)({updateQueryParams:!1}),f=s.pageInfo,p=s.onPageChange,b=s.itemsPerPage,y=s.offset,v=s.onFilterItems,m=(a={offset:y,limit:b,filter:f.filter},(0,Q.I)({queryKey:["ProductListWithVariants",a],keepPreviousData:!0,queryFn:function(){return function(t){return B.k.get(V.A.PRODUCTS_WITH_VARIANTS,{params:(0,G.n5)(t)})}(a).then(function(t){return t.data})}})),O=(0,D.F)().priceFormat,S=(0,C.useMemo)(function(){var t,e;return(null!==(t=null===(e=m.data)||void 0===e?void 0:e.results)&&void 0!==t?t:[]).filter(function(t){return!t.is_gift_card}).flatMap(function(o){var t,e,r,n,i,a=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?U(Object(r),!0).forEach(function(t){z(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):U(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({id:o.id.toString(),catid:o.catid,product_id:o.id,title:o.title,image:o.image,price:null!==(t=o.regular_price)&&void 0!==t?t:0,isTrackingInventory:o.is_tracking_inventory,availableQuantity:null!==(e=o.available_quantity)&&void 0!==e?e:0,inventoryStatus:o.inventory_status,state:x.UNCHECKED,isOld:!1,parentId:"root"},(null===(r=o.product_variants)||void 0===r?void 0:r.length)&&{variantIds:o.product_variants.map(function(t){return t.id})}),c=(null!==(n=o.product_variants)&&void 0!==n?n:[]).filter(function(t){return t.visibility}).map(function(t){var e,r,n,i;return{id:"".concat(o.id,"+").concat(t.id),catid:o.catid,product_id:o.id,variant_id:t.id,title:o.title,variant_name:t.combination.name,image:o.image,variant_image:null!==(e=null===(r=t.image)||void 0===r?void 0:r.src)&&void 0!==e?e:"",price:t.price,isTrackingInventory:o.is_tracking_inventory,availableQuantity:t.inventory_amount,inventoryStatus:t.inventory_status,total_variants:null!==(n=null===(i=o.product_variants)||void 0===i?void 0:i.length)&&void 0!==n?n:0,state:x.UNCHECKED,isOld:!1,parentId:o.id.toString(),options:t.options}});return[a].concat(function(t){if(Array.isArray(t))return M(t)}(i=c)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(i)||function(t,e){if(t){if("string"==typeof t)return M(t,e);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?M(t,e):void 0}}(i)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())})},[null===(e=m.data)||void 0===e?void 0:e.results]),g=function(t){var e,r,n=t.root,i=t.initialItemStates,o=t.currentSelectedItems,a=t.selectedItemIds,c=t.disableOldSelection,l=(e=(0,C.useState)([]),r=2,function(t){if(Array.isArray(t))return t}(e)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,i,o,a,c=[],l=!0,u=!1;try{if(o=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(c.push(n.value),c.length!==e);l=!0);}catch(t){u=!0,i=t}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw i}}return c}}(e,r)||N(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),u=l[0],d=l[1];(0,C.useEffect)(function(){var t=a.filter(function(t){var e;return(null===(e=o.get(t))||void 0===e?void 0:e.state)!==x.UNCHECKED});d(K({oldState:[n].concat(X(i)),selectedItemIds:t,currentSelectedItems:o,disableOldSelection:c,init:!0}))},[d,n,i,a,c,o]);var s=(0,C.useCallback)(function(t){d(t)},[]),f=(0,C.useCallback)(function(t){return d(K({oldState:u,clickedId:t,selectedItemIds:a,currentSelectedItems:o,disableOldSelection:c}))},[u,a,o,c]);return{itemStates:u,toggleSelection:f,handleSetItemStates:s}}({root:W,initialItemStates:S,selectedItemIds:c,currentSelectedItems:l,disableOldSelection:u}),h=g.itemStates,P=g.toggleSelection,E=[{Header:null!==(r=m.data)&&void 0!==r&&r.results.length?(0,H.Y)(I.A,{onChange:function(){return P(W.id)},checked:"checked"===(null===(n=h[0])||void 0===n?void 0:n.state),isIndeterminate:"indeterminate"===(null===(i=h[0])||void 0===i?void 0:i.state),disabled:u&&(null===(o=h[0])||void 0===o?void 0:o.isOld)}):"#",Cell:function(t){var e=(0,R.O9)(t.variant_id);return(0,H.FD)("div",{css:F.checkbox({isVariant:e}),children:[(0,H.Y)(I.A,{onChange:function(){return P(t.id)},checked:"checked"===t.state,isIndeterminate:"indeterminate"===t.state,disabled:u&&t.isOld}),!e&&(0,H.Y)(Y.A,{name:t.title,path:t.image})]})},width:118},{Header:d("COM_EASYSTORE_APP_PRODUCT_NAME"),Cell:function(t){return(0,H.FD)("div",{css:F.productName,children:[(0,H.Y)("div",{css:j.I.heading6("medium"),children:t.variant_name||t.title}),u&&t.isOld&&(0,H.Y)("span",{css:[j.I.body(),{color:_.nm.text.warning},";label:Cell;"],children:d("COM_EASYSTORE_APP_ORDERS_ALREADY_ADDED")})]})}},{Header:d("COM_EASYSTORE_APP_STOCK"),Cell:function(t){return(0,R.O9)(t.variantIds)?null:(0,H.Y)("div",{children:t.isTrackingInventory?d("COM_EASYSTORE_APP_COUPON_PRODUCT_STOCK_AVAILABLE",{stock:t.availableQuantity}):t.inventoryStatus?d("COM_EASYSTORE_APP_PRODUCT_IN_STOCK"):d("COM_EASYSTORE_APP_PRODUCT_OUT_STOCK")})}},{Header:d("COM_EASYSTORE_APP_PRICE"),Cell:function(t){return(0,R.O9)(t.variantIds)?null:(0,H.Y)("div",{children:O(t.price)})}}];return m.isLoading?(0,H.Y)(w.Ay,{}):m.data?(0,H.FD)(H.FK,{children:[(0,H.Y)("div",{css:F.tableActions,children:(0,H.Y)(q,{onFilterItems:v})}),(0,H.Y)("div",{css:F.tableWrapper,children:(0,H.Y)(L.A,{columns:E,data:h.slice(1),colors:J,itemsPerPage:b,loading:m.isFetching||m.isRefetching})}),(0,H.Y)("div",{css:F.paginatorWrapper,children:(0,H.Y)(k.A,{currentPage:f.page,onPageChange:p,totalItems:m.data.totalItems,itemsPerPage:b})})]}):(0,H.Y)("div",{children:d("COM_EASYSTORE_APP_GLOBAL_SOMETHING_WENT_WRONG")})};var F={productName:{name:"dlpum8-productName",styles:"display:flex;flex-direction:column;gap:4px;label:productName;"},tableActions:(0,n.AH)("padding:",_.YK[20]," 0px;;label:tableActions;"),tableWrapper:{name:"1vk2d6x-tableWrapper",styles:"max-height:450px;overflow:auto;label:tableWrapper;"},paginatorWrapper:(0,n.AH)("margin-top:",_.YK[20],";;label:paginatorWrapper;"),checkbox:function(t){var e=t.isVariant,r=void 0!==e&&e;return(0,n.AH)("display:flex;align-items:center;div{margin-left:",_.YK[12],";width:56px;height:56px;}",r&&(0,n.AH)("padding-left:",_.YK[32],";;label:checkbox;"),";;label:checkbox;")}};function b(t){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},b(t)}function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function tt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach(function(t){et(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function et(t,e,r){return(e=function(t){var e=function(t){if("object"!=b(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,"string");if("object"!=b(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==b(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var rt=function(t){var e=t.disableOldSelection,r=t.selectedProductIds,n=t.onSelectProducts,i=t.closeModal,o=t.title,a=(0,A.B)(),c=(0,C.useRef)(new Map);return(0,H.Y)(d.A,{onClose:function(){return i({action:"CLOSE"})},title:o,children:(0,H.FD)("div",{css:m.wrapper,children:[(0,H.Y)("div",{css:m.productWrapper,children:(0,H.Y)(Z,{selectedProductIds:r,currentSelectedProducts:c.current,disableOldSelection:e})}),(0,H.Y)(u.A,{css:m.divider}),(0,H.FD)("div",{css:m.footerWrapper,children:[(0,H.Y)(l.Ay,{variant:l.Ak.secondary,onClick:function(){return i({action:"CLOSE"})},children:a("COM_EASYSTORE_APP_CANCEL")}),(0,H.Y)(l.Ay,{variant:l.Ak.primary,onClick:function(){n(c.current),i({action:"CONFIRM"})},children:a("COM_EASYSTORE_APP_APPLY")})]})]})})},nt=function(){var e=(0,i.h)().showModal,r=(0,A.B)();return{showProductsWithVariantsModal:function(t){return e({component:rt,props:tt({title:r("COM_EASYSTORE_APP_COUPON_SELECT_PRODUCTS")},t)})}}},m={wrapper:{name:"17c1877-wrapper",styles:"min-width:890px;width:100%;label:wrapper;"},productWrapper:(0,n.AH)("padding:",_.YK[20],";padding-top:0;;label:productWrapper;"),divider:(0,n.AH)("box-shadow:",_.r7.dividerTop,";;label:divider;"),footerWrapper:(0,n.AH)("width:100%;display:flex;justify-content:right;gap:",_.YK[8],";padding:",_.YK[16]," ",_.YK[20],";;label:footerWrapper;")}}}]);