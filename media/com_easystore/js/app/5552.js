"use strict";(self.webpackChunkreact_typescript_webpack=self.webpackChunkreact_typescript_webpack||[]).push([[5552],{10361:(e,r,t)=>{t.d(r,{A:()=>d});var S=t(50394),m=t(39248),n=t(49587),i=t(17437),y=t(96540);function _(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=Array(r);t<r;t++)n[t]=e[t];return n}var v=t(88294),b=t(73491),E=t(11135),h=t(85549),o=t(90578),O=t(84026),g=t(2445);function A(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,i,o,a,c=[],u=!0,s=!1;try{if(o=(t=t.call(e)).next,0===r){if(Object(t)!==t)return;u=!1}else for(;!(u=(n=o.call(t)).done)&&(c.push(n.value),c.length!==r);u=!0);}catch(e){s=!0,i=e}finally{try{if(!u&&null!=t.return&&(a=t.return(),Object(a)!==a))return}finally{if(s)throw i}}return c}}(e,r)||function(e,r){if(e){if("string"==typeof e)return a(e,r);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?a(e,r):void 0}}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=Array(r);t<r;t++)n[t]=e[t];return n}const R=function(e){var r,t=e.customerName,n=e.customerEmail,i=e.shippingAddress,o=e.billingAddress,a=e.is_billling_and_shipping_address_same,c=e.customerImage,u=(0,v.B)(),s=function(){var e,r,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=(0,y.useRef)(null),i=(e=(0,y.useState)(!1),r=2,function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,i,o,a,c=[],u=!0,s=!1;try{if(o=(t=t.call(e)).next,0===r){if(Object(t)!==t)return;u=!1}else for(;!(u=(n=o.call(t)).done)&&(c.push(n.value),c.length!==r);u=!0);}catch(e){s=!0,i=e}finally{try{if(!u&&null!=t.return&&(a=t.return(),Object(a)!==a))return}finally{if(s)throw i}}return c}}(e,r)||function(e,r){if(e){if("string"==typeof e)return _(e,r);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_(e,r):void 0}}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=i[0],a=i[1];return(0,y.useEffect)(function(){var e=function(){if(n.current){var e=n.current.getBoundingClientRect().top+window.scrollY;window.scrollY>e-m.$A-t?a(!0):a(!1)}};return e(),window.addEventListener("scroll",e),function(){window.removeEventListener("scroll",e)}},[t,m.$A]),{stickyRef:n,isSticky:o}}(40),l=s.stickyRef,d=s.isSticky,f=function(e){var r,t;if(e){var n=e.name,i=e.address_1,o=e.address_2,a=e.country,c=e.state,u=e.city,s=e.zip_code,l=e.phone,d=null===(r=(0,h.jM)(a))||void 0===r?void 0:r.name,f={name:n,address_1:i,address_2:o,state:(null===(t=(0,h.Gk)(a,Number(c)))||void 0===t?void 0:t.name)||c,city:u,country:d||a,zip_code:s,phone:l};return Object.entries(f).filter(function(e){var r=A(e,2);return r[0],!!r[1]}).map(function(e,r){var t=A(e,2),n=t[0],i=t[1];return"phone"===n?p(i,r):(0,g.Y)("span",{children:i},r)})}},p=function(e,r){if(e)return(0,g.FD)("span",{children:[(0,g.FD)("strong",{children:[u("COM_EASYSTORE_APP_ORDER_ASSIGN_CUSTOMER_SHIPPING_ADDRESS_PHONE")," : "]}),e]},r)};return(0,g.FD)(g.FK,{children:[(0,g.Y)("h6",{css:P.overviewTitle,children:u("COM_EASYSTORE_APP_CUSTOMER_OVERVIEW")}),(0,g.Y)("div",{ref:l,children:(0,g.Y)("div",{css:P.overviewWrapper(d),children:(0,g.FD)(b.A,{children:[(0,g.Y)(b.a,{title:u("COM_EASYSTORE_APP_CUSTOMER")}),(0,g.Y)("div",{css:P.cardInnerSection,children:(0,g.FD)("div",{css:P.sectionWrapper,children:[(0,g.FD)("div",{css:P.customerInfo,children:[(0,g.Y)("div",{css:P.imageCard,children:(0,g.Y)("img",{src:c?(r=c,(0,O.Kg)(r)?r:URL.createObjectURL(r)):E,alt:t})}),(0,g.Y)("p",{css:P.customerName,children:t})]}),(0,g.Y)("p",{children:n})]})}),(0,g.Y)("div",{css:P.cardInnerSection,children:(0,g.FD)("div",{css:P.sectionWrapper,children:[(0,g.Y)("p",{css:P.title,children:u("COM_EASYSTORE_APP_ORDER_ASSIGN_CUSTOMER_SHIPPING_ADDRESS")}),(0,g.Y)("p",{css:P.address,children:f(i)})]})}),(0,g.Y)("div",{css:P.cardInnerSection,children:(0,g.FD)("div",{css:P.sectionWrapper,children:[(0,g.Y)("p",{css:P.title,children:u("COM_EASYSTORE_APP_ORDER_ASSIGN_CUSTOMER_BILLING_ADDRESS")}),(0,g.Y)("p",{css:[P.neutralText,P.address,";label:CustomerOverview;"],children:a?u("COM_EASYSTORE_APP_ORDER_ASSIGN_CUSTOMER_SAME_AS_SHIPPING_ADDRESS"):f(o)})]})})]})})})]})};var P={overviewWrapper:function(e){return e&&(0,i.AH)("position:fixed;top:",m.$A+40,"px;width:354px;;label:overviewWrapper;")},overviewTitle:(0,i.AH)(n.I.heading6(),";margin-bottom:",m.YK[16],";;label:overviewTitle;"),cardInnerSection:(0,i.AH)(o.xB.cardInnerSection,";padding-bottom:",m.YK[12],";box-shadow:",m.r7.underline,";:last-of-type{box-shadow:none;};label:cardInnerSection;"),sectionWrapper:(0,i.AH)("display:flex;flex-direction:column;gap:",m.YK[8],";p{font-size:",m.J[14],";};label:sectionWrapper;"),imageCard:(0,i.AH)("width:32px;height:32px;border:1px solid ",m.nm.border.neutral,";border-radius:",m.Vq.circle,";overflow:hidden;img{width:100%;height:100%;object-fit:cover;};label:imageCard;"),customerInfo:(0,i.AH)("display:flex;align-items:center;gap:",m.YK[8],";;label:customerInfo;"),customerName:(0,i.AH)("color:",m.nm.interactive.default,";;label:customerName;"),title:(0,i.AH)(n.I.body("medium"),";;label:title;"),address:{name:"y9gfzl-address",styles:"display:flex;flex-direction:column;label:address;"},neutralText:(0,i.AH)("color:",m.nm.text.neutral,";;label:neutralText;")},C=t(41943),w=t(96756),T=t(72263),Y=t(99605),I=t(49785),j=t(47767),M=t(87891);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function D(){var p,m,e="function"==typeof Symbol?Symbol:{},r=e.iterator||"@@iterator",t=e.toStringTag||"@@toStringTag";function n(e,r,t,n){var i=r&&r.prototype instanceof a?r:a,o=Object.create(i.prototype);return l(o,"_invoke",function(n,i,e){var o,a,c,u=0,s=e||[],l=!1,d={p:0,n:0,v:p,a:f,f:f.bind(p,4),d:function(e,r){return o=e,a=0,c=p,d.n=r,S}};function f(e,r){for(a=e,c=r,m=0;!l&&u&&!t&&m<s.length;m++){var t,n=s[m],i=d.p,o=n[2];e>3?(t=o===r)&&(c=n[(a=n[4])?5:(a=3,3)],n[4]=n[5]=p):n[0]<=i&&((t=e<2&&i<n[1])?(a=0,d.v=r,d.n=n[1]):i<o&&(t=e<3||n[0]>r||r>o)&&(n[4]=e,n[5]=r,d.n=o,a=0))}if(t||e>1)return S;throw l=!0,r}return function(e,r,t){if(u>1)throw TypeError("Generator is already running");for(l&&1===r&&f(r,t),a=r,c=t;(m=a<2?p:c)||!l;){o||(a?a<3?(a>1&&(d.n=-1),f(a,c)):d.n=c:d.v=c);try{if(u=2,o){if(a||(e="next"),m=o[e]){if(!(m=m.call(o,c)))throw TypeError("iterator result is not an object");if(!m.done)return m;c=m.value,a<2&&(a=0)}else 1===a&&(m=o.return)&&m.call(o),a<2&&(c=TypeError("The iterator does not provide a '"+e+"' method"),a=1);o=p}else if((m=(l=d.n<0)?c:n.call(i,d))!==S)break}catch(e){o=p,a=1,c=e}finally{u=1}}return{value:m,done:l}}}(e,t,n),!0),o}var S={};function a(){}function i(){}function o(){}m=Object.getPrototypeOf;var c=[][r]?m(m([][r]())):(l(m={},r,function(){return this}),m),u=o.prototype=a.prototype=Object.create(c);function s(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,o):(e.__proto__=o,l(e,t,"GeneratorFunction")),e.prototype=Object.create(u),e}return i.prototype=o,l(u,"constructor",o),l(o,"constructor",i),i.displayName="GeneratorFunction",l(o,t,"GeneratorFunction"),l(u),l(u,t,"Generator"),l(u,r,function(){return this}),l(u,"toString",function(){return"[object Generator]"}),(D=function(){return{w:n,m:s}})()}function l(e,r,t,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}l=function(e,r,t,n){function i(r,t){l(e,r,function(e){return this._invoke(r,t,e)})}r?o?o(e,r,{value:t,enumerable:!n,configurable:!n,writable:!n}):e[r]=t:(i("next",0),i("throw",1),i("return",2))},l(e,r,t,n)}function u(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})),t.push.apply(t,n)}return t}function U(r){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?u(Object(t),!0).forEach(function(e){s(r,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):u(Object(t)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(t,e))})}return r}function s(e,r,t){return(r=function(e){var r=function(e){if("object"!=c(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var t=r.call(e,"string");if("object"!=c(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==c(r)?r:r+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function k(e,r,t,n,i,o,a){try{var c=e[o](a),u=c.value}catch(e){return void t(e)}c.done?r(u):Promise.resolve(u).then(n,i)}const d=function(e){var r=e.initialValues,n=e.mode,i=e.userId,t=(0,v.B)(),o=(0,T.i0)(),a=(0,T.H7)(),c=(0,j.Zp)(),u=(0,w.p)({defaultValues:r}),s=(0,I.FH)({control:u.control,name:"name"}),l=(0,I.FH)({control:u.control,name:"email"}),d=(0,I.FH)({control:u.control,name:"shipping_address"}),f=(0,I.FH)({control:u.control,name:"billing_address"}),p=(0,I.FH)({control:u.control,name:"image"}),m=(0,I.FH)({control:u.control,name:"is_billing_and_shipping_address_same"});return(0,y.useEffect)(function(){o.isSuccess&&o.data&&c(C.C.EditCustomer.buildLink({id:o.data.id.toString()}))},[o.isSuccess]),(0,g.Y)("form",{onSubmit:u.handleSubmit((0,Y.Z5)(u,function(){var c,r=(c=D().m(function e(r){var t;return D().w(function(e){for(;;)switch(e.n){case 0:if(t=U(U({},r),{},{id:Number(r.user_id)}),"create"!==n){e.n=2;break}return e.n=1,o.mutateAsync(t);case 1:e.n=4;break;case 2:if(i){e.n=3;break}return e.a(2);case 3:a.mutate(U(U({},t),{},{id:i}));case 4:return e.a(2)}},e)}),function(){var e=this,a=arguments;return new Promise(function(r,t){var n=c.apply(e,a);function i(e){k(n,r,t,i,o,"next",e)}function o(e){k(n,r,t,i,o,"throw",e)}i(void 0)})});return function(e){return r.apply(this,arguments)}}())),children:(0,g.FD)("div",{css:x.createCustomerWrapper,children:[(0,g.FD)("div",{children:[(0,g.Y)(M.A,{form:u}),(0,g.FD)("div",{css:x.buttonWrapper,children:[(0,g.Y)(S.Ay,{variant:S.Ak.secondary,onClick:function(){return c(C.C.CustomersPage.buildLink())},children:t("COM_EASYSTORE_APP_CANCEL")}),(0,g.Y)(S.Ay,{type:"submit",loading:o.isLoading||a.isLoading,children:t("create"===n?"COM_EASYSTORE_APP_NEW_CUSTOMERS_CREATE_NEW_CUSTOMER":"COM_EASYSTORE_APP_NEW_CUSTOMERS_UPDATE_CUSTOMER")})]})]}),(0,g.Y)("div",{children:(0,g.Y)(R,{customerName:s,customerEmail:l,shippingAddress:d,billingAddress:f,customerImage:p,is_billling_and_shipping_address_same:m})})]})})};var x={createCustomerWrapper:(0,i.AH)("display:grid;grid-template-columns:auto 354px;gap:",m.YK[48],";margin-bottom:",m.YK[24],";;label:createCustomerWrapper;"),buttonWrapper:(0,i.AH)("display:flex;padding-top:",m.YK[24],";justify-content:end;gap:",m.YK[8],";;label:buttonWrapper;")}},51352:(e,r,t)=>{t.d(r,{WN:()=>i});var n=t(88294);t(44831);var i=function(){return{required:{value:!0,message:(0,n.s)("COM_EASYSTORE_APP_ERROR_MSG_FIELD_REQUIRED")}}}},72263:(e,r,t)=>{t.d(r,{CT:()=>y,H7:()=>h,JA:()=>m,f$:()=>S,fx:()=>_,i0:()=>b,r3:()=>f});var i=t(21349),o=t(88294),n=t(39176),a=t(63064),c=t(21154),u=t(159),s=t(15501),l=t(44831),d=["id"],f=function(e){return(0,n.I)({queryKey:["JoomlaUsers",e],keepPreviousData:!0,queryFn:function(){return function(e){return u.k.get(s.A.JOOMLA_USERS,{params:(0,l.n5)(e)})}(e).then(function(e){return e.data})}})},p=function(e){return u.k.post(s.A.CONVERT_TO_CUSTOMER,e).then(function(e){return e.data})},m=function(){var e=(0,a.jE)(),r=(0,i.d)().showToast,t=(0,o.B)();return(0,c.n)({mutationFn:p,onSuccess:function(){e.invalidateQueries(["Users"]),r({type:"success",message:t("COM_EASYSTORE_APP_CUSTOMER_SUCCESS_MSG")})},onError:function(e){r({type:"danger",message:t("COM_EASYSTORE_APP_ERROR_RESPONSE",{message:e.message})})}})},S=function(e){return(0,n.I)({queryKey:["Users",e],keepPreviousData:!0,queryFn:function(){return function(e){return u.k.get(s.A.USERS,{params:(0,l.n5)(e)})}(e).then(function(e){return e.data})}})},y=function(e){return u.k.delete(s.A.DELETE_USERS,{params:{ids:e.ids.join(",")}})},_=function(e){var r=e.id;return(0,n.I)({queryKey:["UserById",r],enabled:!!r,queryFn:function(){return(0,l.eU)(r,"Missing user ID"),function(e){return u.k.get(s.A.USER_BY_ID,{params:{id:e}})}(r).then(function(e){return e.data})}})},v=function(e){return u.k.post(s.A.CREATE_USER,e).then(function(e){return e.data})},b=function(){var r=(0,i.d)().showToast,t=(0,o.B)();return(0,c.n)({mutationFn:v,onSuccess:function(){r({type:"success",message:t("COM_EASYSTORE_APP_CUSTOMER_SUCCESS_MSG")})},onError:function(e){r({type:"danger",message:t("COM_EASYSTORE_APP_ERROR_RESPONSE",{message:e.message})})}})},E=function(e){var r=e.id,t=function(e,r){if(null==e)return{};var t,n,i=function(e,r){if(null==e)return{};var t={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==r.indexOf(n))continue;t[n]=e[n]}return t}(e,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)t=o[n],-1===r.indexOf(t)&&{}.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}(e,d);return u.k.put(s.A.UPDATE_USER,t,{params:{id:r}}).then(function(e){return e.data})},h=function(){var r=(0,i.d)().showToast,t=(0,o.B)(),n=(0,a.jE)();return(0,c.n)({mutationFn:E,onSuccess:function(e){n.invalidateQueries(["UserById",e.id]),r({type:"success",message:t("COM_EASYSTORE_APP_CUSTOMER_SUCCESS_MSG")})},onError:function(e){r({type:"danger",message:t("COM_EASYSTORE_APP_ERROR_RESPONSE",{message:e.message})})}})}}}]);