Joomla=window.Joomla||{};((o,t)=>{t.addEventListener("alpine:init",()=>{Alpine.data("easystore_product_import",()=>{return{isValidZip:false,isLoading:false,closeModal(){const e=t.getElementById("easystoreProductImport");const s=e?.querySelector(".btn-close");if(s){s.click();this.$refs.zipInput.value=""}},checkZipValidity(){this.isValidZip=this.$refs.zipInput.files.length>0&&this.$refs.zipInput.files[0].name.toLowerCase().endsWith(".zip");if(this.isValidZip){}else{o.renderMessages({error:[o.Text._("COM_EASYSTORE_PRODUCT_IMPORT_SELECT_VALID_FILE")]})}},importZip(){this.isLoading=true;const e=o.getOptions("easystore.base")||"";const s=`${e}/administrator/index.php?option=com_easystore&task=products.import`;const t=new FormData;t.append("import_file",this.$refs.zipInput.files[0]);o.request({url:s,method:"POST",data:t,onSuccess:async e=>{e=JSON.parse(e);if(e.status){o.renderMessages({success:[e.message]});this.closeModal();window.location.reload()}else{o.renderMessages({error:[e.message]});this.closeModal()}},onError:e=>{const s=e.response&&JSON.parse(e.response);errorMessage=s?.message??"Something went wrong";o.renderMessages({error:[errorMessage]});this.closeModal()},onComplete:()=>{this.isValidZip=false;this.isLoading=false}})}}})});o.submitbutton=e=>{if(e==="products.export"){const s=[];t.querySelectorAll("input[name='cid[]']:checked").forEach(e=>s.push(e.value));t.exportCSV.cids.value=s.join(",");o.submitform(e,t.getElementById("exportCSV"));return}o.submitform(e)}})(Joomla,document);